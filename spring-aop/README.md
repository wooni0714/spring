# AOP

- AOP(Aspect-Oriented-Programming**)**는 **관점 지향 프로그래밍**이라는 뜻.
- 흩어진 관심사를 모듈화 할 수 있는 프로그래밍 기법
- 코드상에서 계속 반복해서 사용되는 부분들을 흩어진 관심사(Crosscutting Concerns)라고 함.
- 모듈화 시켜놓고 어디에 적용시킬지 정의해주는데 모듈화 시켜놓은 것을 Aspect라고 함
- 객체지향적으로 코드를 짤 수 있게 도와주며 유지보수가 용이해짐.

## AOP의 동작과정

<img width="1044" alt="스크린샷 2024-09-06 오전 11 06 44" src="https://github.com/user-attachments/assets/331ef05b-66e9-49b1-ad59-ee77185e0b6b">

1. 빈후처리기 : 빈 객체를 생성한 뒤 빈 후처리기에 전달한다.
2. 어드바이저 : 어드바이저 내의 포인트컷을 이용해 전달받은 빈이 프록시 적용대상인지 확인한다.
3. 프록시 생성기 : 프록시 생성 대상 빈들을 대상으로 프록시 객체를 생성한다.
4. 빈 후처리기 : 프록시를 생성한 빈이라면 프록시객체, 생성하지 않은 빈이라면 그냥 빈을 반환한다.
5. 빈 후처리기에서 전달받은 객체를 스프링 빈으로 등록한다.
- 프록시 : 원본 객체를 감싼 새로운 객체로, 스프링 AOP에서 부가 기능을 추가할 때 사용하는 패턴

## AOP 용어

- Target
    
    ```
    - 핵심 기능을 담고 있는 모듈로 타겟은 부가기능을 부여할 대상.
    
    (어떤 대상에 부가 기능을 부여할 것인가?)
    
    ```
    
- Advice (AspectJ)
    
    ```
    - 핵심 기능(Target)에 부가기능Aspect)를 언제 적용할지 정의.
    
    ⦁ @Before(이전) : 메소드가 호출되기 이전에 호출.$
    
    ⦁ @After(이후) : 메소드가 반환되거나, 예외상황이 발행한 이후에 호출$. (finally)
    
    ⦁ @AfterReturning(정상적 반환 이후) : 메소드가 반환된 이후에 호출.$ (try)
    
    ⦁ @AfterThrowing(예외 발생 이후) : 메소드가 예외 상황을 발생시킨 이후에 호출.$ (catch)
    
    ⦁ @@Around@(전/후) : 메소드의 호출전과 반환되거나 예외상황 이후에 호출.$
    
    ```
    
- Join Point
    
    ```
    어디에 적용할 것인가 ?  Advice가 적용될 위치.
    
    Spring AOP는 메서드 실행 지점만 포인트컷으로 선별 가능.
    
    ```
    
- Point Cut
    
    ```
    관심 조인 포인트를 결정하므로 Advice가 실행되는 시기를 제어.
    
    (어떤 메서드에 적용할꺼야?)
    
    ```
